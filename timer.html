<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>倒计时工具 - 神农百草</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <meta name="google-adsense-account" content="ca-pub-8794607118520437">
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-ZBGLVPRZ1R"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-ZBGLVPRZ1R');
    </script>
</head>
<body>
    <!-- 导航栏 -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-logo">
                <i class="fas fa-leaf"></i>
                <span data-zh="神农百草" data-en="Shennong Herbs">神农百草</span>
            </div>
            <ul class="nav-menu">
                <li class="nav-item">
                    <a href="index.html#herbs" class="nav-link" data-zh="本草图鉴" data-en="Herb Catalog">本草图鉴</a>
                </li>
                <li class="nav-item">
                    <a href="books.html" class="nav-link" data-zh="中医好书" data-en="TCM Books">中医好书</a>
                </li>
                <li class="nav-item">
                    <a href="timer.html" class="nav-link active" data-zh="倒计时" data-en="Timer">倒计时</a>
                </li>
                <li class="nav-item">
                    <a href="game.html" class="nav-link" data-zh="小游戏" data-en="Games">小游戏</a>
                </li>
                <li class="nav-item">
                    <a href="index.html#about" class="nav-link" data-zh="关于我们" data-en="About Us">关于我们</a>
                </li>
                <li class="nav-item">
                    <button id="languageToggle" class="language-toggle">
                        <span class="lang-text" data-zh="EN" data-en="中文">EN</span>
                        <i class="fas fa-globe"></i>
                    </button>
                </li>
            </ul>
            <div class="hamburger">
                <span class="bar"></span>
                <span class="bar"></span>
                <span class="bar"></span>
            </div>
        </div>
    </nav>

    <!-- 页面头部 -->
    <section class="page-header">
        <div class="container">
            <h1 class="page-title" data-zh="倒计时工具" data-en="Timer Tool">倒计时工具</h1>
            <p class="page-subtitle" data-zh="精确计时，助您合理安排时间，提高学习效率" data-en="Precise timing to help you arrange time reasonably and improve learning efficiency">精确计时，助您合理安排时间，提高学习效率</p>
        </div>
    </section>

    <!-- 倒计时工具区域 -->
    <section class="timer-section">
        <div class="container">
            <div class="timer-container">
                <!-- 倒计时显示 -->
                <div class="timer-display">
                    <div class="timer-circle">
                        <div class="timer-time" id="timerDisplay">
                            <span id="hours">00</span>:<span id="minutes">00</span>:<span id="seconds">00</span>
                        </div>
                        <div class="timer-progress" id="timerProgress"></div>
                    </div>
                </div>

                <!-- 控制按钮 -->
                <div class="timer-controls">
                    <button id="startBtn" class="timer-btn start-btn">
                        <i class="fas fa-play"></i>
                        <span data-zh="开始" data-en="Start">开始</span>
                    </button>
                    <button id="pauseBtn" class="timer-btn pause-btn" style="display: none;">
                        <i class="fas fa-pause"></i>
                        <span data-zh="暂停" data-en="Pause">暂停</span>
                    </button>
                    <button id="resetBtn" class="timer-btn reset-btn">
                        <i class="fas fa-redo"></i>
                        <span data-zh="重置" data-en="Reset">重置</span>
                    </button>
                </div>

                <!-- 时间设置 -->
                <div class="timer-settings">
                    <h3 data-zh="设置时间" data-en="Set Time">设置时间</h3>
                    <div class="time-inputs">
                        <div class="time-input-group">
                            <label data-zh="小时" data-en="Hours">小时</label>
                            <input type="number" id="hoursInput" min="0" max="23" value="0">
                        </div>
                        <div class="time-input-group">
                            <label data-zh="分钟" data-en="Minutes">分钟</label>
                            <input type="number" id="minutesInput" min="0" max="59" value="25">
                        </div>
                        <div class="time-input-group">
                            <label data-zh="秒" data-en="Seconds">秒</label>
                            <input type="number" id="secondsInput" min="0" max="59" value="0">
                        </div>
                    </div>
                </div>

                <!-- 快速设置按钮 -->
                <div class="quick-settings">
                    <h3 data-zh="快速设置" data-en="Quick Settings">快速设置</h3>
                    <div class="quick-buttons">
                        <button class="quick-btn" data-time="1500" data-zh="25分钟" data-en="25 Min">25分钟</button>
                        <button class="quick-btn" data-time="3000" data-zh="50分钟" data-en="50 Min">50分钟</button>
                        <button class="quick-btn" data-time="900" data-zh="15分钟" data-en="15 Min">15分钟</button>
                        <button class="quick-btn" data-time="600" data-zh="10分钟" data-en="10 Min">10分钟</button>
                        <button class="quick-btn" data-time="300" data-zh="5分钟" data-en="5 Min">5分钟</button>
                        <button class="quick-btn" data-time="60" data-zh="1分钟" data-en="1 Min">1分钟</button>
                    </div>
                </div>
            </div>

            <!-- 计时器功能说明 -->
            <div class="timer-features">
                <h2 class="section-title" data-zh="功能特点" data-en="Features">功能特点</h2>
                <div class="features-grid">
                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="fas fa-clock"></i>
                        </div>
                        <h3 data-zh="精确计时" data-en="Precise Timing">精确计时</h3>
                        <p data-zh="毫秒级精确计时，确保时间准确性" data-en="Millisecond-level precise timing to ensure time accuracy">毫秒级精确计时，确保时间准确性</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="fas fa-bell"></i>
                        </div>
                        <h3 data-zh="声音提醒" data-en="Sound Alert">声音提醒</h3>
                        <p data-zh="时间到自动播放提示音，不会错过重要时刻" data-en="Automatic sound alert when time is up, never miss important moments">时间到自动播放提示音，不会错过重要时刻</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="fas fa-mobile-alt"></i>
                        </div>
                        <h3 data-zh="响应式设计" data-en="Responsive Design">响应式设计</h3>
                        <p data-zh="支持手机、平板、电脑等多种设备使用" data-en="Supports multiple devices including phones, tablets, and computers">支持手机、平板、电脑等多种设备使用</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="fas fa-save"></i>
                        </div>
                        <h3 data-zh="本地存储" data-en="Local Storage">本地存储</h3>
                        <p data-zh="自动保存您的计时设置，下次使用无需重新配置" data-en="Automatically saves your timer settings, no need to reconfigure next time">自动保存您的计时设置，下次使用无需重新配置</p>
                    </div>
                </div>
            </div>

            <!-- 使用场景 -->
            <div class="usage-scenarios">
                <h2 class="section-title" data-zh="使用场景" data-en="Usage Scenarios">使用场景</h2>
                <div class="scenarios-grid">
                    <div class="scenario-card">
                        <div class="scenario-icon">
                            <i class="fas fa-graduation-cap"></i>
                        </div>
                        <h3 data-zh="学习计时" data-en="Study Timer">学习计时</h3>
                        <p data-zh="使用番茄工作法，25分钟专注学习，5分钟休息" data-en="Use Pomodoro technique: 25 minutes focused study, 5 minutes break">使用番茄工作法，25分钟专注学习，5分钟休息</p>
                    </div>
                    <div class="scenario-card">
                        <div class="scenario-icon">
                            <i class="fas fa-dumbbell"></i>
                        </div>
                        <h3 data-zh="运动计时" data-en="Exercise Timer">运动计时</h3>
                        <p data-zh="为不同运动项目设置合适的计时，科学健身" data-en="Set appropriate timers for different exercises, scientific fitness">为不同运动项目设置合适的计时，科学健身</p>
                    </div>
                    <div class="scenario-card">
                        <div class="scenario-icon">
                            <i class="fas fa-utensils"></i>
                        </div>
                        <h3 data-zh="烹饪计时" data-en="Cooking Timer">烹饪计时</h3>
                        <p data-zh="为不同食材设置烹饪时间，确保美食完美呈现" data-en="Set cooking time for different ingredients to ensure perfect dishes">为不同食材设置烹饪时间，确保美食完美呈现</p>
                    </div>
                    <div class="scenario-card">
                        <div class="scenario-icon">
                            <i class="fas fa-bed"></i>
                        </div>
                        <h3 data-zh="休息提醒" data-en="Rest Reminder">休息提醒</h3>
                        <p data-zh="设置工作休息时间，保护眼睛，提高工作效率" data-en="Set work break time to protect eyes and improve work efficiency">设置工作休息时间，保护眼睛，提高工作效率</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- 页脚 -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3 data-zh="神农百草" data-en="Shennong Herbs">神农百草</h3>
                    <p data-zh="探索传统中医药的智慧" data-en="Explore the wisdom of traditional Chinese medicine">探索传统中医药的智慧</p>
                </div>
                <div class="footer-section">
                    <h4 data-zh="快速链接" data-en="Quick Links">快速链接</h4>
                    <ul>
                        <li><a href="index.html#herbs" data-zh="本草图鉴" data-en="Herb Catalog">本草图鉴</a></li>
                        <li><a href="books.html" data-zh="中医好书" data-en="TCM Books">中医好书</a></li>
                        <li><a href="timer.html" data-zh="倒计时" data-en="Timer">倒计时</a></li>
                        <li><a href="game.html" data-zh="小游戏" data-en="Games">小游戏</a></li>
                        <li><a href="index.html#about" data-zh="关于我们" data-en="About Us">关于我们</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4 data-zh="联系我们" data-en="Contact Us">联系我们</h4>
                    <p><i class="fas fa-envelope"></i> contact@shennong.com</p>
                    <p><i class="fas fa-phone"></i> 400-123-4567</p>
                </div>
            </div>
            <div class="footer-bottom">
                <p data-zh="© 2024 神农百草. 保留所有权利." data-en="© 2024 Shennong Herbs. All rights reserved.">&copy; 2024 神农百草. 保留所有权利.</p>
            </div>
        </div>
    </footer>

    <script src="script.js"></script>
    <script>
        // 倒计时功能
        class Timer {
            constructor() {
                this.isRunning = false;
                this.startTime = 0;
                this.overallTime = 0;
                this.totalTime = 0;
                this.interval = null;
            }

            _getTimeElapsedSinceLastStart() {
                if (!this.startTime) {
                    return 0;
                }
                return Date.now() - this.startTime;
            }

            start() {
                if (this.isRunning) {
                    return console.log('Timer is already running');
                }
                this.isRunning = true;
                this.startTime = Date.now();
                this.interval = setInterval(() => this.updateDisplay(), 100);
            }

            stop() {
                if (!this.isRunning) {
                    return;
                }
                this.isRunning = false;
                clearInterval(this.interval);
                this.overallTime = this.overallTime + this._getTimeElapsedSinceLastStart();
            }

            reset() {
                this.overallTime = 0;
                this.totalTime = 0;
                this.isRunning = false;
                this.startTime = 0;
                clearInterval(this.interval);
                this.updateDisplay();
            }

            setTime(time) {
                this.totalTime = time * 1000;
                this.overallTime = 0;
                this.updateDisplay();
            }

            updateDisplay() {
                const remainingTime = Math.max(0, this.totalTime - this.overallTime - this._getTimeElapsedSinceLastStart());
                const hours = Math.floor(remainingTime / (1000 * 60 * 60));
                const minutes = Math.floor((remainingTime % (1000 * 60 * 60)) / (1000 * 60));
                const seconds = Math.floor((remainingTime % (1000 * 60)) / 1000);

                document.getElementById('hours').textContent = hours.toString().padStart(2, '0');
                document.getElementById('minutes').textContent = minutes.toString().padStart(2, '0');
                document.getElementById('seconds').textContent = seconds.toString().padStart(2, '0');

                // 更新进度条
                const progress = this.totalTime > 0 ? (remainingTime / this.totalTime) * 100 : 100;
                document.getElementById('timerProgress').style.strokeDashoffset = 440 - (440 * progress) / 100;

                // 检查是否时间到
                if (remainingTime <= 0 && this.isRunning) {
                    this.stop();
                    this.playAlarm();
                    alert('时间到！');
                }
            }

            playAlarm() {
                // 创建音频上下文播放提示音
                const audioContext = new (window.AudioContext || window.webkitAudioContext)();
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();

                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);

                oscillator.frequency.setValueAtTime(800, audioContext.currentTime);
                oscillator.frequency.setValueAtTime(600, audioContext.currentTime + 0.1);
                oscillator.frequency.setValueAtTime(800, audioContext.currentTime + 0.2);

                gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.3);

                oscillator.start(audioContext.currentTime);
                oscillator.stop(audioContext.currentTime + 0.3);
            }
        }

        // 初始化计时器
        const timer = new Timer();

        // 事件监听器
        document.getElementById('startBtn').addEventListener('click', () => {
            timer.start();
            document.getElementById('startBtn').style.display = 'none';
            document.getElementById('pauseBtn').style.display = 'inline-flex';
        });

        document.getElementById('pauseBtn').addEventListener('click', () => {
            timer.stop();
            document.getElementById('startBtn').style.display = 'inline-flex';
            document.getElementById('pauseBtn').style.display = 'none';
        });

        document.getElementById('resetBtn').addEventListener('click', () => {
            timer.reset();
            document.getElementById('startBtn').style.display = 'inline-flex';
            document.getElementById('pauseBtn').style.display = 'none';
        });

        // 时间输入监听
        function updateTimerFromInputs() {
            const hours = parseInt(document.getElementById('hoursInput').value) || 0;
            const minutes = parseInt(document.getElementById('minutesInput').value) || 0;
            const seconds = parseInt(document.getElementById('secondsInput').value) || 0;
            const totalSeconds = hours * 3600 + minutes * 60 + seconds;
            timer.setTime(totalSeconds);
        }

        document.getElementById('hoursInput').addEventListener('input', updateTimerFromInputs);
        document.getElementById('minutesInput').addEventListener('input', updateTimerFromInputs);
        document.getElementById('secondsInput').addEventListener('input', updateTimerFromInputs);

        // 快速设置按钮
        document.querySelectorAll('.quick-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                const time = parseInt(btn.dataset.time);
                const hours = Math.floor(time / 3600);
                const minutes = Math.floor((time % 3600) / 60);
                const seconds = time % 60;

                document.getElementById('hoursInput').value = hours;
                document.getElementById('minutesInput').value = minutes;
                document.getElementById('secondsInput').value = seconds;
                updateTimerFromInputs();
            });
        });

        // 初始化显示
        updateTimerFromInputs();
    </script>
</body>
</html>
